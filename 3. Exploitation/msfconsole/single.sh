#!/bin/bash
print_help() {
    cat <<EOF
╔═ Run a single msfconsole exploit ═╗
╠═══════════════════════════════════╣
║ Usage: ./run <exploit>            ║
╚═══════════════════════════════════╝
EOF
}
STOP="\\e[0m"
RED="\\e[31m"

#═════════════ S T A R T ═════════════#
if [[ $# != 1 ]]; then
    print_help
    exit 1
fi
if [[ "$1" == "-h" ]]; then
    print_help
    exit 0
fi

args=$(cat $(dirname $0)/settings.list)
filename=$(date +"$RANDOM-%Y-%m-%d-%H-%M-%S")

cat <<EOF >> "$filename"
use $1
$args
exploit
EOF

msfconsole -qr "$filename"
rm "$filename"
